                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          

void SetLocationDeleteTime(Location&loc,uint time)
{
	GameVar@locDelete=GetLocalVar((3313),loc.Id);
	if((@locDelete!=null))
	locDelete=__FullSecond+time;
}  

void _DeletableMapInit(Map&map,bool firstTime)
{
	Location@loc=map.GetLocation();
	if(!(@loc!=null))
	return;
	GameVar@locDelete=GetLocalVar((3313),loc.Id);
	if(!(@locDelete!=null)||locDelete==0)
	return;
	map.SetEvent((2),"_DeletableMapLoop1");
}

void _DeletableMapLoop1(Map&map)
{
	Location@loc=map.GetLocation();
	if(!(@loc!=null))
	return;
	GameVar@locDelete=GetLocalVar((3313),loc.Id);
	if(!(@locDelete!=null)||locDelete>__FullSecond)
	return;
	
	loc.AutoGarbage=true;
}      

Location@CreateLocationForCritter(Critter&player,int locPid,int worldX,int worldY,int delta,int varNum)
{
	uint locId=CreateLocation(locPid,worldX+Random(-1*delta,delta),worldY+Random(-1*delta,delta),null);
	if(locId==0)
	return null;
	Location@loc=GetLocation(locId);
	if(!(@loc!=null))
	return null;
	loc.AutoGarbage=false;
	player.SetKnownLoc(true,loc.Id);
	if(varNum>0)
	{
		GameVar@var=GetLocalVar(varNum,player.Id);
		if((@var!=null))
		var=loc.Id;
	}
	return loc;
}

