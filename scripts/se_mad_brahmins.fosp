                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               

import bool AddAttackPlane(Critter&npc,uint priority,Critter&target)from"npc_planes";
import bool GetNearEntire(Map&map,int number,uint16&hx,uint16&hy)from"entire";
import void ExplodeEx(Map&map,uint16 hexX,uint16 hexY,uint16 effectPid,uint effectRadius,uint damage,uint damageType,uint damageRadius,uint ownerId)from"explode";  

void _BrahminInit(Critter&br,bool firstTime)
{
	br.SetEvent((4),"_Show");
	br.SetEvent((15),"_Bah");
}

void _Show(Critter&br,Critter&showCrit)
{
	br.Say((1),"Mooo...");
	if(showCrit.IsPlayer())
	AddAttackPlane(br,0,showCrit);
}

bool _Bah(Critter&br,Critter&target)
{
	
	Map@map=br.GetMap();
	br.Say((3),"Mooo");
	br.ToDead((117),null);
	ExplodeEx(map,br.HexX,br.HexY,(4011),2,Random(30,60),(7),2,0); 
	
	uint16 hX=0,hY=0;
	if(GetNearEntire(map,(107),hX,hY))
	map.AddNpc((404),hX,hY,Random(0,5),null,null,"_BrahminInit");
	
	return true;
} 

void Test(Critter&cr,int,int,int)
{
	uint locId=CreateLocation((59),cr.WorldX,cr.WorldY,null);
	Location@loc=GetLocation(locId);
	Map@map=loc.GetMapByIndex(0);
	cr.TransitToMap(map.Id,0);
}
