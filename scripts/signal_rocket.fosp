                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           

void _PistolInit(Item&item,bool firstTime)
{
	item.SetEvent((2),"_PistolUse");
}

bool _PistolUse(Item&item,Critter&cr,Critter@onCritter,Item@onItem,Scenery@onScenery)
{
	Map@map=cr.GetMap();
	if(!(@onCritter!=null)&&!(@onItem!=null)&&!(@onScenery!=null)&&(@map!=null)&&item.AmmoCount>0)
	{
		Location@loc=map.GetLocation();
		cr.Animate(0,(54),null,true,true);
		cr.PlaySound("WAA1XXX1.acm",true);
		item.AmmoCount=0;
		item.Update();
		if((@loc!=null)&&loc.AutoGarbage&&!loc.Visible)
		{
			if(CreateTimeEvent(__FullSecond+((3)*__TimeMultiplier*60),"e_HideLocation",loc.Id,true)>0)
			{
				loc.Visible=true;
				
				cr.SayMsg((11),(0),(17),"$minutes"+((3)*__TimeMultiplier*60)/60);
			}
		}
		return true;
	}
	return false;
}

uint e_HideLocation(uint[]@values)
{
	Location@loc=GetLocation(values[0]);
	if((@loc!=null))
	{
		loc.Visible=false;
		
	}
	return 0;
}
